{
    "version": 3,
    "file": "Tabs.js",
    "sourceRoot": "",
    "sources": [
        "/src/renderers/Tabs.tsx"
    ],
    "names": [],
    "mappings": "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",
    "sourcesContent": [
        "import React from 'react';\nimport {Renderer, RendererProps} from '../factory';\nimport {Action, Schema, SchemaNode} from '../types';\nimport find from 'lodash/find';\nimport {\n  isVisible,\n  autobind,\n  isDisabled,\n  isObject,\n  createObject\n} from '../utils/helper';\nimport findIndex from 'lodash/findIndex';\nimport {Tabs as CTabs, Tab} from '../components/Tabs';\nimport {ClassNamesFn} from '../theme';\nimport {\n  BaseSchema,\n  SchemaClassName,\n  SchemaCollection,\n  SchemaIcon\n} from '../Schema';\nimport {ActionSchema} from './Action';\nimport {filter} from '../utils/tpl';\nimport {resolveVariable} from '../utils/tpl-builtin';\n\nexport interface TabSchema extends Omit<BaseSchema, 'type'> {\n  /**\n   * Tab 标题\n   */\n  title?: string;\n\n  /**\n   * 内容\n   * @deprecated 用 body 属性\n   */\n  tab?: SchemaCollection;\n\n  /**\n   * 内容\n   */\n  body?: SchemaCollection;\n\n  /**\n   * 徽标\n   */\n  badge?: number;\n\n  /**\n   * 设置以后将跟url的hash对应\n   */\n  hash?: string;\n\n  /**\n   * 按钮图标\n   */\n  icon?: SchemaIcon;\n\n  iconPosition?: 'left' | 'right';\n\n  /**\n   * 设置以后内容每次都会重新渲染\n   */\n  reload?: boolean;\n\n  /**\n   * 点开时才加载卡片内容\n   */\n  mountOnEnter?: boolean;\n\n  /**\n   * 卡片隐藏就销毁卡片节点。\n   */\n  unmountOnExit?: boolean;\n}\n\n/**\n * 选项卡控件。\n * 文档：https://baidu.gitee.io/amis/docs/components/tabs\n */\nexport interface TabsSchema extends BaseSchema {\n  type: 'tabs';\n\n  /**\n   * 选项卡成员。当配置了 source 时，选项卡成员，将会根据目标数据进行重复。\n   */\n  tabs: Array<TabSchema>;\n\n  /**\n   * 关联已有数据，选项卡直接根据目标数据重复。\n   */\n  source?: string;\n\n  /**\n   * 类名\n   */\n  tabsClassName?: SchemaClassName;\n\n  /**\n   * 展示形式\n   */\n  tabsMode?: '' | 'line' | 'card' | 'radio' | 'vertical' | 'tiled';\n\n  /**\n   * 内容类名\n   */\n  contentClassName?: SchemaClassName;\n\n  /**\n   * 卡片是否只有在点开的时候加载？\n   */\n  mountOnEnter?: boolean;\n\n  /**\n   * 卡片隐藏的时候是否销毁卡片内容\n   */\n  unmountOnExit?: boolean;\n\n  /**\n   * 可以在右侧配置点其他功能按钮。\n   */\n  toolbar?: ActionSchema;\n}\n\nexport interface TabsProps\n  extends RendererProps,\n    Omit<TabsSchema, 'className' | 'contentClassName'> {\n  activeKey?: string | number;\n  location?: any;\n  tabRender?: (tab: TabSchema, props: TabsProps, index: number) => JSX.Element;\n}\n\nexport interface TabsState {\n  activeKey: any;\n  prevKey: any;\n}\n\nexport default class Tabs extends React.Component<TabsProps, TabsState> {\n  static defaultProps: Partial<TabsProps> = {\n    className: '',\n    mode: '',\n    mountOnEnter: true,\n    unmountOnExit: false\n  };\n\n  renderTab?: (tab: TabSchema, props: TabsProps, index: number) => JSX.Element;\n  activeKey: any;\n\n  constructor(props: TabsProps) {\n    super(props);\n\n    const location = props.location || window.location;\n    const tabs = props.tabs;\n    let activeKey: any = 0;\n\n    if (typeof props.activeKey !== 'undefined') {\n      activeKey = props.activeKey;\n    } else if (location && Array.isArray(tabs)) {\n      const hash = location.hash.substring(1);\n      const tab: TabSchema = find(tabs, tab => tab.hash === hash) as TabSchema;\n      activeKey = tab && tab.hash ? tab.hash : (tabs[0] && tabs[0].hash) || 0;\n    }\n\n    this.state = {\n      prevKey: undefined,\n      activeKey: (this.activeKey = activeKey)\n    };\n  }\n\n  componentDidMount() {\n    this.autoJumpToNeighbour(this.activeKey);\n  }\n\n  componentDidUpdate(preProps: TabsProps, prevState: any) {\n    const props = this.props;\n\n    if (props.location && props.location.hash !== preProps.location.hash) {\n      const hash = props.location.hash.substring(1);\n      if (!hash) {\n        return;\n      }\n\n      const tab: TabSchema = find(\n        props.tabs,\n        tab => tab.hash === hash\n      ) as TabSchema;\n      if (tab && tab.hash && tab.hash !== this.state.activeKey) {\n        this.setState({\n          activeKey: (this.activeKey = tab.hash),\n          prevKey: this.state.activeKey\n        });\n      }\n    } else if (preProps.tabs !== props.tabs) {\n      let activeKey: any = this.state.activeKey;\n      const location = props.location;\n      let tab: TabSchema | null = null;\n\n      if (location && Array.isArray(props.tabs)) {\n        const hash = location.hash.substring(1);\n        tab = find(props.tabs, tab => tab.hash === hash) as TabSchema;\n      }\n\n      if (tab) {\n        activeKey = tab.hash;\n      } else if (\n        !props.tabs ||\n        !props.tabs.some((item, index) =>\n          item.hash ? item.hash === activeKey : index === activeKey\n        )\n      ) {\n        activeKey = (props.tabs && props.tabs[0] && props.tabs[0].hash) || 0;\n      }\n\n      this.setState({\n        prevKey: undefined,\n        activeKey: (this.activeKey = activeKey)\n      });\n    }\n\n    this.autoJumpToNeighbour(this.activeKey);\n  }\n\n  @autobind\n  autoJumpToNeighbour(key: any) {\n    const {tabs, data} = this.props;\n\n    if (!Array.isArray(tabs)) {\n      return;\n    }\n\n    // 当前 tab 可能不可见，所以需要自动切到一个可见的 tab, 向前找，找一圈\n    const tabIndex = findIndex(tabs, (tab: TabSchema, index) =>\n      tab.hash ? tab.hash === key : index === key\n    );\n\n    if (tabs[tabIndex] && !isVisible(tabs[tabIndex], this.props.data)) {\n      let len = tabs.length;\n      let i = tabIndex - 1 + len;\n      let tries = len - 1;\n\n      while (tries--) {\n        const index = i-- % len;\n        if (isVisible(tabs[index], data)) {\n          let activeKey = tabs[index].hash || index;\n          this.setState({\n            activeKey: (this.activeKey = activeKey)\n          });\n          break;\n        }\n      }\n    }\n  }\n\n  @autobind\n  handleSelect(key: any) {\n    const {env} = this.props;\n\n    // 是 hash，需要更新到地址栏\n    if (typeof key === 'string' && env) {\n      env.updateLocation(`#${key}`);\n    } else if (typeof this.state.activeKey === 'string' && env) {\n      env.updateLocation(`#`);\n    }\n\n    this.setState({\n      activeKey: (this.activeKey = key),\n      prevKey: this.state.activeKey\n    });\n  }\n\n  @autobind\n  switchTo(index: number) {\n    const {tabs} = this.props;\n\n    Array.isArray(tabs) &&\n      tabs[index] &&\n      this.setState({\n        activeKey: (this.activeKey = tabs[index].hash || index)\n      });\n  }\n\n  @autobind\n  currentIndex(): number {\n    const {tabs} = this.props;\n\n    return Array.isArray(tabs)\n      ? findIndex(tabs, (tab: TabSchema, index) =>\n          tab.hash\n            ? tab.hash === this.state.activeKey\n            : index === this.state.activeKey\n        )\n      : -1;\n  }\n\n  renderToolbar() {\n    const {toolbar, render, classnames: cx, toolbarClassName} = this.props;\n\n    return toolbar ? (\n      <div className={cx(`Tabs-toolbar`, toolbarClassName)}>\n        {render('toolbar', toolbar)}\n      </div>\n    ) : null;\n  }\n\n  renderTabs() {\n    const {\n      classnames: cx,\n      classPrefix: ns,\n      contentClassName,\n      tabRender,\n      className,\n      render,\n      data,\n      mode: dMode,\n      tabsMode,\n      mountOnEnter,\n      unmountOnExit,\n      source\n    } = this.props;\n\n    const mode = tabsMode || dMode;\n    const arr = resolveVariable(source, data);\n\n    let tabs = this.props.tabs;\n    if (!tabs) {\n      return null;\n    }\n\n    tabs = Array.isArray(tabs) ? tabs : [tabs];\n    let children: Array<JSX.Element | null> = [];\n\n    if (Array.isArray(arr)) {\n      arr.forEach((value, index) => {\n        const ctx = createObject(\n          data,\n          isObject(value) ? {index, ...value} : {item: value, index}\n        );\n\n        children.push(\n          ...tabs.map((tab, tabIndex) =>\n            isVisible(tab, ctx) ? (\n              <Tab\n                {...(tab as any)}\n                title={filter(tab.title, ctx)}\n                disabled={isDisabled(tab, ctx)}\n                key={`${index * 1000 + tabIndex}`}\n                eventKey={index * 1000 + tabIndex}\n                mountOnEnter={mountOnEnter}\n                unmountOnExit={\n                  typeof tab.reload === 'boolean'\n                    ? tab.reload\n                    : typeof tab.unmountOnExit === 'boolean'\n                    ? tab.unmountOnExit\n                    : unmountOnExit\n                }\n              >\n                {render(\n                  `item/${index}/${tabIndex}`,\n                  tab.tab || tab.body || '',\n                  {\n                    data: ctx\n                  }\n                )}\n              </Tab>\n            ) : null\n          )\n        );\n      });\n    } else {\n      children = tabs.map((tab, index) =>\n        isVisible(tab, data) ? (\n          <Tab\n            {...(tab as any)}\n            title={filter(tab.title, data)}\n            disabled={isDisabled(tab, data)}\n            key={index}\n            eventKey={tab.hash || index}\n            mountOnEnter={mountOnEnter}\n            unmountOnExit={\n              typeof tab.reload === 'boolean'\n                ? tab.reload\n                : typeof tab.unmountOnExit === 'boolean'\n                ? tab.unmountOnExit\n                : unmountOnExit\n            }\n          >\n            {this.renderTab\n              ? this.renderTab(tab, this.props, index)\n              : tabRender\n              ? tabRender(tab, this.props, index)\n              : render(`tab/${index}`, tab.tab || tab.body || '')}\n          </Tab>\n        ) : null\n      );\n    }\n\n    return (\n      <CTabs\n        classPrefix={ns}\n        classnames={cx}\n        mode={mode}\n        className={className}\n        contentClassName={contentClassName}\n        onSelect={this.handleSelect}\n        activeKey={this.state.activeKey}\n        toolbar={this.renderToolbar()}\n      >\n        {children}\n      </CTabs>\n    );\n  }\n\n  render() {\n    return this.renderTabs();\n  }\n}\n\n@Renderer({\n  test: /(^|\\/)tabs$/,\n  name: 'tabs'\n})\nexport class TabsRenderer extends Tabs {}\n"
    ]
}